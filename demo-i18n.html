<!DOCTYPE html>
<html lang="zh-CN" data-i18n-title="main.gameTitle">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>多语言支持演示 - WSP</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/i18n.css">
    <style>
        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            color: #ffffff;
        }
        
        .demo-section {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .lang-demo {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 6px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .demo-stats {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
        }
        
        .demo-button {
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            color: #ffffff;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.2s;
        }
        
        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.3);
        }
        
        .current-lang {
            background: rgba(79, 172, 254, 0.2);
            color: #4facfe;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.9em;
            display: inline-block;
            margin: 10px 0;
        }
        
        .feature-list {
            list-style: none;
            padding: 0;
        }
        
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .feature-list li:last-child {
            border-bottom: none;
        }
        
        .feature-list li::before {
            content: '✓';
            color: #4ade80;
            font-weight: bold;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <!-- 语言切换器 -->
    <div id="languageSwitcher" class="language-switcher top-right"></div>
    
    <div class="starfield">
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
    </div>
    
    <div class="demo-container">
        <header class="demo-section">
            <h1 data-i18n="demo.title">多语言支持演示</h1>
            <p data-i18n="demo.subtitle">Web Space Program 国际化功能展示</p>
            <div class="current-lang">
                <strong data-i18n="language.current">当前语言:</strong>
                <span id="currentLangDisplay">简体中文</span>
            </div>
        </header>
        
        <section class="demo-section">
            <h2 data-i18n="demo.features.title">功能特性</h2>
            <div class="demo-grid">
                <div class="lang-demo">
                    <h3 data-i18n="demo.features.automatic.title">自动语言检测</h3>
                    <p data-i18n="demo.features.automatic.description">系统会自动检测浏览器语言并设置相应的显示语言</p>
                </div>
                <div class="lang-demo">
                    <h3 data-i18n="demo.features.realtime.title">实时切换</h3>
                    <p data-i18n="demo.features.realtime.description">无需刷新页面即可切换语言，所有文本内容立即更新</p>
                </div>
                <div class="lang-demo">
                    <h3 data-i18n="demo.features.persistence.title">记忆设置</h3>
                    <p data-i18n="demo.features.persistence.description">语言选择会保存在本地存储中，下次访问时自动恢复</p>
                </div>
                <div class="lang-demo">
                    <h3 data-i18n="demo.features.parts.title">部件数据</h3>
                    <p data-i18n="demo.features.parts.description">火箭部件名称和描述支持多语言显示</p>
                </div>
            </div>
        </section>
        
        <section class="demo-section">
            <h2 data-i18n="demo.interface.title">界面元素演示</h2>
            <div class="demo-grid">
                <div class="lang-demo">
                    <h3 data-i18n="rocketBuilder.title">载具装配大楼</h3>
                    <ul class="feature-list">
                        <li data-i18n="rocketBuilder.partsLibrary.title">部件库</li>
                        <li data-i18n="rocketBuilder.assemblyArea.title">装配区域</li>
                        <li data-i18n="rocketBuilder.infoPanel.title">载具信息</li>
                    </ul>
                    <button class="demo-button" data-i18n="rocketBuilder.saveDesign">保存设计</button>
                    <button class="demo-button" data-i18n="rocketBuilder.launch">发射</button>
                </div>
                <div class="lang-demo">
                    <h3 data-i18n="launchPad.title">发射台</h3>
                    <div class="demo-stats">
                        <span data-i18n="launchPad.flightData.altitude">高度:</span>
                        <span id="demoAltitude">145 m</span>
                    </div>
                    <div class="demo-stats">
                        <span data-i18n="launchPad.flightData.velocity">速度:</span>
                        <span id="demoVelocity">25.7 m/s</span>
                    </div>
                    <div class="demo-stats">
                        <span data-i18n="launchPad.flightData.fuel">燃料:</span>
                        <span id="demoFuel">87%</span>
                    </div>
                    <button class="demo-button" data-i18n="launchPad.controls.launch">点火发射</button>
                    <button class="demo-button" data-i18n="launchPad.controls.abort">中止</button>
                </div>
            </div>
        </section>
        
        <section class="demo-section">
            <h2 data-i18n="demo.parts.title">部件翻译演示</h2>
            <div class="demo-grid">
                <div class="lang-demo">
                    <h4 data-i18n="parts.commandPod.name">Mk1 指令舱</h4>
                    <p data-i18n="parts.commandPod.description">基础的载人指令舱，可容纳1名宇航员</p>
                </div>
                <div class="lang-demo">
                    <h4 data-i18n="parts.liquidEngine.name">LV-T30 液体燃料引擎</h4>
                    <p data-i18n="parts.liquidEngine.description">可靠的液体燃料火箭引擎</p>
                </div>
                <div class="lang-demo">
                    <h4 data-i18n="parts.fuelTankMedium.name">FL-T400 燃料箱</h4>
                    <p data-i18n="parts.fuelTankMedium.description">中型液体燃料箱</p>
                </div>
                <div class="lang-demo">
                    <h4 data-i18n="parts.decoupler.name">TD-12 分离器</h4>
                    <p data-i18n="parts.decoupler.description">用于分离火箭级的装置</p>
                </div>
            </div>
        </section>
        
        <section class="demo-section">
            <h2 data-i18n="demo.languages.title">支持的语言</h2>
            <div class="demo-grid">
                <div class="lang-demo">
                    <h3>🇨🇳 简体中文</h3>
                    <p data-i18n="demo.languages.chinese">完整的中文界面，包括所有菜单、按钮和提示文本</p>
                    <button class="demo-button lang-switch" data-lang="zh-CN">切换到中文</button>
                </div>
                <div class="lang-demo">
                    <h3>🇺🇸 English</h3>
                    <p data-i18n="demo.languages.english">Complete English interface with all menus, buttons and help text</p>
                    <button class="demo-button lang-switch" data-lang="en-US">Switch to English</button>
                </div>
            </div>
        </section>
        
        <section class="demo-section">
            <h2 data-i18n="demo.technical.title">技术特性</h2>
            <ul class="feature-list">
                <li data-i18n="demo.technical.lazy">按需加载语言包</li>
                <li data-i18n="demo.technical.fallback">智能回退机制</li>
                <li data-i18n="demo.technical.parameters">支持参数插值</li>
                <li data-i18n="demo.technical.formatting">本地化数字和日期格式</li>
                <li data-i18n="demo.technical.events">语言切换事件系统</li>
                <li data-i18n="demo.technical.performance">高性能更新机制</li>
            </ul>
        </section>
        
        <footer class="demo-section">
            <p data-i18n="demo.footer">返回 <a href="index.html" data-i18n="common.home">主页</a> 体验完整的多语言支持功能。</p>
        </footer>
    </div>
    
    <script src="js/i18n/i18n.js"></script>
    <script src="js/i18n/language-switcher.js"></script>
    <script src="js/i18n/i18n-parts.js"></script>
    
    <script>
        // 扩展演示页面的语言包
        const demoTranslations = {
            'zh-CN': {
                demo: {
                    title: '多语言支持演示',
                    subtitle: 'Web Space Program 国际化功能展示',
                    features: {
                        title: '功能特性',
                        automatic: {
                            title: '自动语言检测',
                            description: '系统会自动检测浏览器语言并设置相应的显示语言'
                        },
                        realtime: {
                            title: '实时切换',
                            description: '无需刷新页面即可切换语言，所有文本内容立即更新'
                        },
                        persistence: {
                            title: '记忆设置',
                            description: '语言选择会保存在本地存储中，下次访问时自动恢复'
                        },
                        parts: {
                            title: '部件数据',
                            description: '火箭部件名称和描述支持多语言显示'
                        }
                    },
                    interface: {
                        title: '界面元素演示'
                    },
                    parts: {
                        title: '部件翻译演示'
                    },
                    languages: {
                        title: '支持的语言',
                        chinese: '完整的中文界面，包括所有菜单、按钮和提示文本',
                        english: '完整的英文界面，包括所有菜单、按钮和帮助文本'
                    },
                    technical: {
                        title: '技术特性',
                        lazy: '按需加载语言包',
                        fallback: '智能回退机制',
                        parameters: '支持参数插值',
                        formatting: '本地化数字和日期格式',
                        events: '语言切换事件系统',
                        performance: '高性能更新机制'
                    },
                    footer: '返回主页体验完整的多语言支持功能。'
                }
            },
            'en-US': {
                demo: {
                    title: 'Multi-language Support Demo',
                    subtitle: 'Web Space Program Internationalization Features',
                    features: {
                        title: 'Features',
                        automatic: {
                            title: 'Auto Language Detection',
                            description: 'Automatically detects browser language and sets appropriate display language'
                        },
                        realtime: {
                            title: 'Real-time Switching',
                            description: 'Switch languages without page refresh, all text content updates instantly'
                        },
                        persistence: {
                            title: 'Remember Settings',
                            description: 'Language selection is saved in local storage and restored on next visit'
                        },
                        parts: {
                            title: 'Parts Data',
                            description: 'Rocket part names and descriptions support multi-language display'
                        }
                    },
                    interface: {
                        title: 'Interface Elements Demo'
                    },
                    parts: {
                        title: 'Parts Translation Demo'
                    },
                    languages: {
                        title: 'Supported Languages',
                        chinese: 'Complete Chinese interface with all menus, buttons and help text',
                        english: 'Complete English interface with all menus, buttons and help text'
                    },
                    technical: {
                        title: 'Technical Features',
                        lazy: 'Lazy loading of language packs',
                        fallback: 'Smart fallback mechanism',
                        parameters: 'Parameter interpolation support',
                        formatting: 'Localized number and date formatting',
                        events: 'Language switching event system',
                        performance: 'High-performance update mechanism'
                    },
                    footer: 'Return to the home page to experience complete multi-language support.'
                }
            }
        };
        
        // 初始化演示
        document.addEventListener('DOMContentLoaded', async () => {
            // 扩展语言包
            Object.keys(demoTranslations).forEach(lang => {
                if (window.i18n.translations[lang]) {
                    Object.assign(window.i18n.translations[lang], demoTranslations[lang]);
                } else {
                    window.i18n.translations[lang] = demoTranslations[lang];
                }
            });
            
            await window.i18n.init();
            await window.i18nRocketParts.init();
            
            // 创建语言切换器
            new LanguageSwitcher('#languageSwitcher', {
                style: 'dropdown',
                showFlag: true,
                showText: true
            });
            
            // 更新当前语言显示
            updateCurrentLanguageDisplay();
            
            // 监听语言切换
            window.addEventListener('languageChanged', () => {
                updateCurrentLanguageDisplay();
                updateDemoValues();
            });
            
            // 初始化演示数值
            updateDemoValues();
        });
        
        function updateCurrentLanguageDisplay() {
            const display = document.getElementById('currentLangDisplay');
            if (display && window.i18n) {
                display.textContent = window.i18n.getLanguageDisplayName();
            }
        }
        
        function updateDemoValues() {
            // 更新演示数值的单位
            if (window.i18nRocketParts) {
                document.getElementById('demoAltitude').textContent = 
                    window.i18nRocketParts.formatValueWithUnit(145, 'm');
                document.getElementById('demoVelocity').textContent = 
                    window.i18nRocketParts.formatValueWithUnit(25.7, 'm/s');
                document.getElementById('demoFuel').textContent = 
                    window.i18nRocketParts.formatValueWithUnit(87, '%');
            }
        }
    </script>
</body>
</html>
