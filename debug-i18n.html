<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>国际化调试页面</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .debug-section { margin: 20px 0; padding: 10px; border: 1px solid #ccc; }
        .part-test { margin: 10px 0; padding: 10px; background: #f5f5f5; }
        .lang-switch { margin: 10px 0; }
        button { margin: 5px; padding: 5px 10px; }
    </style>
</head>
<body>
    <h1>国际化系统调试</h1>
    
    <div class="lang-switch">
        <button onclick="switchLanguage('zh-CN')">中文</button>
        <button onclick="switchLanguage('en-US')">English</button>
    </div>
    
    <div class="debug-section">
        <h2>翻译测试</h2>
        <div id="test-translations"></div>
    </div>
    
    <div class="debug-section">
        <h2>部件名称测试</h2>
        <div id="test-parts"></div>
    </div>
    
    <script src="js/i18n/i18n.js"></script>
    <script src="js/i18n/locales/zh-CN.js"></script>
    <script src="js/i18n/locales/en-US.js"></script>
    <script src="js/rocket-parts.js"></script>
    
    <script>
        let currentLanguage = 'zh-CN';
        
        // 初始化翻译系统
        async function initializeI18n() {
            await window.i18n.init(currentLanguage);
            updateTests();
        }
        
        // 切换语言
        async function switchLanguage(lang) {
            currentLanguage = lang;
            await window.i18n.setLanguage(lang);
            updateTests();
        }
        
        // 更新测试内容
        function updateTests() {
            // 测试基本翻译
            const testTranslations = document.getElementById('test-translations');
            testTranslations.innerHTML = `
                <div><strong>基本翻译测试:</strong></div>
                <div>rocketBuilder.partsPanel.mass = "${window.i18n.t('rocketBuilder.partsPanel.mass')}"</div>
                <div>rocketBuilder.partsPanel.thrust = "${window.i18n.t('rocketBuilder.partsPanel.thrust')}"</div>
                <div>parts.commandPod.name = "${window.i18n.t('parts.commandPod.name')}"</div>
                <div>parts.fuelTank.name = "${window.i18n.t('parts.fuelTank.name')}"</div>
            `;
            
            // 测试部件名称
            const testParts = document.getElementById('test-parts');
            const allParts = RocketParts.getAllParts();
            let partsHtml = '<div><strong>部件列表:</strong></div>';
            
            allParts.forEach(part => {
                let translatedName = part.name;
                if (part.nameKey && window.i18n) {
                    const translated = window.i18n.t(part.nameKey);
                    if (translated !== part.nameKey) {
                        translatedName = translated;
                    }
                }
                
                partsHtml += `
                    <div class="part-test">
                        <div>ID: ${part.id}</div>
                        <div>原名: ${part.name}</div>
                        <div>翻译键: ${part.nameKey || '无'}</div>
                        <div>翻译名: ${translatedName}</div>
                    </div>
                `;
            });
            
            testParts.innerHTML = partsHtml;
        }
        
        // 页面加载后初始化
        document.addEventListener('DOMContentLoaded', () => {
            initializeI18n();
        });
    </script>
</body>
</html>
